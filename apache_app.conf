DirectoryIndex index.php

RewriteEngine On
# Redirect root to public directory
RewriteRule ^$ public/index.php [L]
# Pass all other requests to the public directory
RewriteRule ^(?!public/)(.*)$ public/$1 [L]

# Set the public directory as document root
<Directory /app/public>
    Options -Indexes +FollowSymLinks
    AllowOverride All
    Require all granted
    
    # Handle image and asset files directly
    <FilesMatch "\.(jpg|jpeg|png|gif|ico|css|js)$">
        RewriteEngine Off
    </FilesMatch>
</Directory>

# Prevent redirect loops by setting a reasonable limit
LimitInternalRecursion 5 